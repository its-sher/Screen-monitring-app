"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "PublisherGitHubConfig", {
    enumerable: true,
    get: function() {
        return _config.PublisherGitHubConfig;
    }
});
exports.default = void 0;
var _asyncOra = require("@electron-forge/async-ora");
var _fsExtra = _interopRequireDefault(require("fs-extra"));
var _mimeTypes = _interopRequireDefault(require("mime-types"));
var _path = _interopRequireDefault(require("path"));
var _publisherBase = _interopRequireDefault(require("@electron-forge/publisher-base"));
var _github = _interopRequireDefault(require("./util/github"));
var _noReleaseError = _interopRequireDefault(require("./util/no-release-error"));
var _config = require("./Config");
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
class PublisherGithub extends _publisherBase.default {
    async publish({ makeResults  }) {
        const { config  } = this;
        const perReleaseArtifacts = {};
        for (const makeResult of makeResults){
            const release = makeResult.packageJSON.version;
            if (!perReleaseArtifacts[release]) {
                perReleaseArtifacts[release] = [];
            }
            perReleaseArtifacts[release].push(makeResult);
        }
        if (!(config.repository && typeof config.repository === 'object' && config.repository.owner && config.repository.name)) {
            throw new Error('In order to publish to github you must set the "github_repository.owner" and "github_repository.name" properties in your Forge config. See the docs for more info');
        }
        const github = new _github.default(config.authToken, true, config.octokitOptions);
        const octokit = github.getGitHub();
        for (const releaseVersion of Object.keys(perReleaseArtifacts)){
            let release;
            const artifacts = perReleaseArtifacts[releaseVersion];
            var _tagPrefix;
            const releaseName = `${(_tagPrefix = config.tagPrefix) !== null && _tagPrefix !== void 0 ? _tagPrefix : 'v'}${releaseVersion}`;
            await (0, _asyncOra).asyncOra(`Searching for target release: ${releaseName}`, async ()=>{
                try {
                    release = (await github.getGitHub().repos.listReleases({
                        owner: config.repository.owner,
                        repo: config.repository.name,
                        per_page: 100
                    })).data.find((testRelease)=>testRelease.tag_name === releaseName
                    );
                    if (!release) {
                        throw new _noReleaseError.default(404);
                    }
                } catch (err) {
                    if (err instanceof _noReleaseError.default && err.code === 404) {
                        // Release does not exist, let's make it
                        release = (await github.getGitHub().repos.createRelease({
                            owner: config.repository.owner,
                            repo: config.repository.name,
                            tag_name: releaseName,
                            name: releaseName,
                            draft: config.draft !== false,
                            prerelease: config.prerelease === true
                        })).data;
                    } else {
                        // Unknown error
                        throw err;
                    }
                }
            });
            let uploaded = 0;
            await (0, _asyncOra).asyncOra(`Uploading Artifacts ${uploaded}/${artifacts.length} to ${releaseName}`, async (uploadSpinner)=>{
                const updateSpinner = ()=>{
                    uploadSpinner.text = `Uploading Artifacts ${uploaded}/${artifacts.length} to ${releaseName}`;
                };
                const flatArtifacts = [];
                for (const artifact of artifacts){
                    flatArtifacts.push(...artifact.artifacts);
                }
                await Promise.all(flatArtifacts.map(async (artifactPath)=>{
                    const done = ()=>{
                        uploaded += 1;
                        updateSpinner();
                    };
                    const artifactName = _path.default.basename(artifactPath);
                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
                    if (release.assets.find((asset)=>asset.name === artifactName
                    )) {
                        return done();
                    }
                    await github.getGitHub().repos.uploadReleaseAsset({
                        owner: config.repository.owner,
                        repo: config.repository.name,
                        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
                        release_id: release.id,
                        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
                        url: release.upload_url,
                        // https://github.com/octokit/rest.js/issues/1645
                        data: await _fsExtra.default.readFile(artifactPath),
                        headers: {
                            'content-type': _mimeTypes.default.lookup(artifactPath) || 'application/octet-stream',
                            'content-length': (await _fsExtra.default.stat(artifactPath)).size
                        },
                        name: _path.default.basename(artifactPath)
                    });
                    return done();
                }));
            });
        }
    }
    constructor(...args){
        super(...args);
        this.name = 'github';
    }
}
exports.default = PublisherGithub;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9QdWJsaXNoZXJHaXRodWIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXN5bmNPcmEgfSBmcm9tICdAZWxlY3Ryb24tZm9yZ2UvYXN5bmMtb3JhJztcbmltcG9ydCB7IEZvcmdlTWFrZVJlc3VsdCB9IGZyb20gJ0BlbGVjdHJvbi1mb3JnZS9zaGFyZWQtdHlwZXMnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzLWV4dHJhJztcbmltcG9ydCBtaW1lIGZyb20gJ21pbWUtdHlwZXMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgUHVibGlzaGVyQmFzZSwgeyBQdWJsaXNoZXJPcHRpb25zIH0gZnJvbSAnQGVsZWN0cm9uLWZvcmdlL3B1Ymxpc2hlci1iYXNlJztcbmltcG9ydCB7IEdldFJlc3BvbnNlRGF0YVR5cGVGcm9tRW5kcG9pbnRNZXRob2QgfSBmcm9tICdAb2N0b2tpdC90eXBlcyc7XG5cbmltcG9ydCBHaXRIdWIgZnJvbSAnLi91dGlsL2dpdGh1Yic7XG5pbXBvcnQgTm9SZWxlYXNlRXJyb3IgZnJvbSAnLi91dGlsL25vLXJlbGVhc2UtZXJyb3InO1xuaW1wb3J0IHsgUHVibGlzaGVyR2l0SHViQ29uZmlnIH0gZnJvbSAnLi9Db25maWcnO1xuXG5pbnRlcmZhY2UgR2l0SHViUmVsZWFzZSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjYW1lbGNhc2VcbiAgdGFnX25hbWU6IHN0cmluZztcbiAgYXNzZXRzOiB7XG4gICAgbmFtZTogc3RyaW5nO1xuICB9W107XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjYW1lbGNhc2VcbiAgdXBsb2FkX3VybDogc3RyaW5nO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQdWJsaXNoZXJHaXRodWIgZXh0ZW5kcyBQdWJsaXNoZXJCYXNlPFB1Ymxpc2hlckdpdEh1YkNvbmZpZz4ge1xuICBuYW1lID0gJ2dpdGh1Yic7XG5cbiAgYXN5bmMgcHVibGlzaCh7IG1ha2VSZXN1bHRzIH06IFB1Ymxpc2hlck9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB7IGNvbmZpZyB9ID0gdGhpcztcblxuICAgIGNvbnN0IHBlclJlbGVhc2VBcnRpZmFjdHM6IHtcbiAgICAgIFt2ZXJzaW9uOiBzdHJpbmddOiBGb3JnZU1ha2VSZXN1bHRbXTtcbiAgICB9ID0ge307XG5cbiAgICBmb3IgKGNvbnN0IG1ha2VSZXN1bHQgb2YgbWFrZVJlc3VsdHMpIHtcbiAgICAgIGNvbnN0IHJlbGVhc2UgPSBtYWtlUmVzdWx0LnBhY2thZ2VKU09OLnZlcnNpb247XG4gICAgICBpZiAoIXBlclJlbGVhc2VBcnRpZmFjdHNbcmVsZWFzZV0pIHtcbiAgICAgICAgcGVyUmVsZWFzZUFydGlmYWN0c1tyZWxlYXNlXSA9IFtdO1xuICAgICAgfVxuICAgICAgcGVyUmVsZWFzZUFydGlmYWN0c1tyZWxlYXNlXS5wdXNoKG1ha2VSZXN1bHQpO1xuICAgIH1cblxuICAgIGlmICghKGNvbmZpZy5yZXBvc2l0b3J5ICYmIHR5cGVvZiBjb25maWcucmVwb3NpdG9yeSA9PT0gJ29iamVjdCcgJiYgY29uZmlnLnJlcG9zaXRvcnkub3duZXIgJiYgY29uZmlnLnJlcG9zaXRvcnkubmFtZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ0luIG9yZGVyIHRvIHB1Ymxpc2ggdG8gZ2l0aHViIHlvdSBtdXN0IHNldCB0aGUgXCJnaXRodWJfcmVwb3NpdG9yeS5vd25lclwiIGFuZCBcImdpdGh1Yl9yZXBvc2l0b3J5Lm5hbWVcIiBwcm9wZXJ0aWVzIGluIHlvdXIgRm9yZ2UgY29uZmlnLiBTZWUgdGhlIGRvY3MgZm9yIG1vcmUgaW5mbydcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgZ2l0aHViID0gbmV3IEdpdEh1Yihjb25maWcuYXV0aFRva2VuLCB0cnVlLCBjb25maWcub2N0b2tpdE9wdGlvbnMpO1xuXG4gICAgY29uc3Qgb2N0b2tpdCA9IGdpdGh1Yi5nZXRHaXRIdWIoKTtcbiAgICB0eXBlIE9jdG9raXRSZWxlYXNlID0gR2V0UmVzcG9uc2VEYXRhVHlwZUZyb21FbmRwb2ludE1ldGhvZDx0eXBlb2Ygb2N0b2tpdC5yZXBvcy5nZXRSZWxlYXNlPjtcbiAgICB0eXBlIE9jdG9raXRSZWxlYXNlQXNzZXQgPSBHZXRSZXNwb25zZURhdGFUeXBlRnJvbUVuZHBvaW50TWV0aG9kPHR5cGVvZiBvY3Rva2l0LnJlcG9zLnVwZGF0ZVJlbGVhc2VBc3NldD47XG5cbiAgICBmb3IgKGNvbnN0IHJlbGVhc2VWZXJzaW9uIG9mIE9iamVjdC5rZXlzKHBlclJlbGVhc2VBcnRpZmFjdHMpKSB7XG4gICAgICBsZXQgcmVsZWFzZTogT2N0b2tpdFJlbGVhc2UgfCB1bmRlZmluZWQ7XG4gICAgICBjb25zdCBhcnRpZmFjdHMgPSBwZXJSZWxlYXNlQXJ0aWZhY3RzW3JlbGVhc2VWZXJzaW9uXTtcbiAgICAgIGNvbnN0IHJlbGVhc2VOYW1lID0gYCR7Y29uZmlnLnRhZ1ByZWZpeCA/PyAndid9JHtyZWxlYXNlVmVyc2lvbn1gO1xuXG4gICAgICBhd2FpdCBhc3luY09yYShgU2VhcmNoaW5nIGZvciB0YXJnZXQgcmVsZWFzZTogJHtyZWxlYXNlTmFtZX1gLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmVsZWFzZSA9IChcbiAgICAgICAgICAgIGF3YWl0IGdpdGh1Yi5nZXRHaXRIdWIoKS5yZXBvcy5saXN0UmVsZWFzZXMoe1xuICAgICAgICAgICAgICBvd25lcjogY29uZmlnLnJlcG9zaXRvcnkub3duZXIsXG4gICAgICAgICAgICAgIHJlcG86IGNvbmZpZy5yZXBvc2l0b3J5Lm5hbWUsXG4gICAgICAgICAgICAgIHBlcl9wYWdlOiAxMDAsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICkuZGF0YS5maW5kKCh0ZXN0UmVsZWFzZTogR2l0SHViUmVsZWFzZSkgPT4gdGVzdFJlbGVhc2UudGFnX25hbWUgPT09IHJlbGVhc2VOYW1lKTtcbiAgICAgICAgICBpZiAoIXJlbGVhc2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb1JlbGVhc2VFcnJvcig0MDQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIE5vUmVsZWFzZUVycm9yICYmIGVyci5jb2RlID09PSA0MDQpIHtcbiAgICAgICAgICAgIC8vIFJlbGVhc2UgZG9lcyBub3QgZXhpc3QsIGxldCdzIG1ha2UgaXRcbiAgICAgICAgICAgIHJlbGVhc2UgPSAoXG4gICAgICAgICAgICAgIGF3YWl0IGdpdGh1Yi5nZXRHaXRIdWIoKS5yZXBvcy5jcmVhdGVSZWxlYXNlKHtcbiAgICAgICAgICAgICAgICBvd25lcjogY29uZmlnLnJlcG9zaXRvcnkub3duZXIsXG4gICAgICAgICAgICAgICAgcmVwbzogY29uZmlnLnJlcG9zaXRvcnkubmFtZSxcbiAgICAgICAgICAgICAgICB0YWdfbmFtZTogcmVsZWFzZU5hbWUsXG4gICAgICAgICAgICAgICAgbmFtZTogcmVsZWFzZU5hbWUsXG4gICAgICAgICAgICAgICAgZHJhZnQ6IGNvbmZpZy5kcmFmdCAhPT0gZmFsc2UsXG4gICAgICAgICAgICAgICAgcHJlcmVsZWFzZTogY29uZmlnLnByZXJlbGVhc2UgPT09IHRydWUsXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApLmRhdGE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFVua25vd24gZXJyb3JcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBsZXQgdXBsb2FkZWQgPSAwO1xuICAgICAgYXdhaXQgYXN5bmNPcmEoYFVwbG9hZGluZyBBcnRpZmFjdHMgJHt1cGxvYWRlZH0vJHthcnRpZmFjdHMubGVuZ3RofSB0byAke3JlbGVhc2VOYW1lfWAsIGFzeW5jICh1cGxvYWRTcGlubmVyKSA9PiB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZVNwaW5uZXIgPSAoKSA9PiB7XG4gICAgICAgICAgdXBsb2FkU3Bpbm5lci50ZXh0ID0gYFVwbG9hZGluZyBBcnRpZmFjdHMgJHt1cGxvYWRlZH0vJHthcnRpZmFjdHMubGVuZ3RofSB0byAke3JlbGVhc2VOYW1lfWA7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZmxhdEFydGlmYWN0czogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBhcnRpZmFjdCBvZiBhcnRpZmFjdHMpIHtcbiAgICAgICAgICBmbGF0QXJ0aWZhY3RzLnB1c2goLi4uYXJ0aWZhY3QuYXJ0aWZhY3RzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgIGZsYXRBcnRpZmFjdHMubWFwKGFzeW5jIChhcnRpZmFjdFBhdGgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRvbmUgPSAoKSA9PiB7XG4gICAgICAgICAgICAgIHVwbG9hZGVkICs9IDE7XG4gICAgICAgICAgICAgIHVwZGF0ZVNwaW5uZXIoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBhcnRpZmFjdE5hbWUgPSBwYXRoLmJhc2VuYW1lKGFydGlmYWN0UGF0aCk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgaWYgKHJlbGVhc2UhLmFzc2V0cy5maW5kKChhc3NldDogT2N0b2tpdFJlbGVhc2VBc3NldCkgPT4gYXNzZXQubmFtZSA9PT0gYXJ0aWZhY3ROYW1lKSkge1xuICAgICAgICAgICAgICByZXR1cm4gZG9uZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgZ2l0aHViLmdldEdpdEh1YigpLnJlcG9zLnVwbG9hZFJlbGVhc2VBc3NldCh7XG4gICAgICAgICAgICAgIG93bmVyOiBjb25maWcucmVwb3NpdG9yeS5vd25lcixcbiAgICAgICAgICAgICAgcmVwbzogY29uZmlnLnJlcG9zaXRvcnkubmFtZSxcbiAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgICAgcmVsZWFzZV9pZDogcmVsZWFzZSEuaWQsXG4gICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICAgIHVybDogcmVsZWFzZSEudXBsb2FkX3VybCxcbiAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL29jdG9raXQvcmVzdC5qcy9pc3N1ZXMvMTY0NVxuICAgICAgICAgICAgICBkYXRhOiAoYXdhaXQgZnMucmVhZEZpbGUoYXJ0aWZhY3RQYXRoKSkgYXMgdW5rbm93biBhcyBzdHJpbmcsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnY29udGVudC10eXBlJzogbWltZS5sb29rdXAoYXJ0aWZhY3RQYXRoKSB8fCAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyxcbiAgICAgICAgICAgICAgICAnY29udGVudC1sZW5ndGgnOiAoYXdhaXQgZnMuc3RhdChhcnRpZmFjdFBhdGgpKS5zaXplLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBuYW1lOiBwYXRoLmJhc2VuYW1lKGFydGlmYWN0UGF0aCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkb25lKCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgeyBQdWJsaXNoZXJHaXRIdWJDb25maWcgfTtcbiJdLCJuYW1lcyI6WyJQdWJsaXNoZXJHaXRIdWJDb25maWciLCJQdWJsaXNoZXJHaXRodWIiLCJQdWJsaXNoZXJCYXNlIiwicHVibGlzaCIsIm1ha2VSZXN1bHRzIiwiY29uZmlnIiwicGVyUmVsZWFzZUFydGlmYWN0cyIsIm1ha2VSZXN1bHQiLCJyZWxlYXNlIiwicGFja2FnZUpTT04iLCJ2ZXJzaW9uIiwicHVzaCIsInJlcG9zaXRvcnkiLCJvd25lciIsIm5hbWUiLCJFcnJvciIsImdpdGh1YiIsIkdpdEh1YiIsImF1dGhUb2tlbiIsIm9jdG9raXRPcHRpb25zIiwib2N0b2tpdCIsImdldEdpdEh1YiIsInJlbGVhc2VWZXJzaW9uIiwiT2JqZWN0Iiwia2V5cyIsImFydGlmYWN0cyIsInJlbGVhc2VOYW1lIiwidGFnUHJlZml4IiwiYXN5bmNPcmEiLCJyZXBvcyIsImxpc3RSZWxlYXNlcyIsInJlcG8iLCJwZXJfcGFnZSIsImRhdGEiLCJmaW5kIiwidGVzdFJlbGVhc2UiLCJ0YWdfbmFtZSIsIk5vUmVsZWFzZUVycm9yIiwiZXJyIiwiY29kZSIsImNyZWF0ZVJlbGVhc2UiLCJkcmFmdCIsInByZXJlbGVhc2UiLCJ1cGxvYWRlZCIsImxlbmd0aCIsInVwbG9hZFNwaW5uZXIiLCJ1cGRhdGVTcGlubmVyIiwidGV4dCIsImZsYXRBcnRpZmFjdHMiLCJhcnRpZmFjdCIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJhcnRpZmFjdFBhdGgiLCJkb25lIiwiYXJ0aWZhY3ROYW1lIiwicGF0aCIsImJhc2VuYW1lIiwiYXNzZXRzIiwiYXNzZXQiLCJ1cGxvYWRSZWxlYXNlQXNzZXQiLCJyZWxlYXNlX2lkIiwiaWQiLCJ1cmwiLCJ1cGxvYWRfdXJsIiwiZnMiLCJyZWFkRmlsZSIsImhlYWRlcnMiLCJtaW1lIiwibG9va3VwIiwic3RhdCIsInNpemUiXSwibWFwcGluZ3MiOiI7Ozs7K0JBc0lTQSxDQUFxQjs7O2VBQXJCQSxPQUFxQjs7OztBQXRJTCxHQUEyQixDQUEzQixTQUEyQjtBQUVyQyxHQUFVLENBQVYsUUFBVTtBQUNSLEdBQVksQ0FBWixVQUFZO0FBQ1osR0FBTSxDQUFOLEtBQU07QUFDeUIsR0FBZ0MsQ0FBaEMsY0FBZ0M7QUFHN0QsR0FBZSxD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